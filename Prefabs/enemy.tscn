[gd_scene load_steps=26 format=3 uid="uid://cw54xulhcegc4"]

[ext_resource type="Script" uid="uid://6kaucufqm742" path="res://Scripts/enemy.gd" id="1_lgw76"]
[ext_resource type="Texture2D" uid="uid://c4xmwxct4nrvh" path="res://Assets/Sprites/enemys/robot/3-Robot-Idle.png" id="2_t4g6b"]
[ext_resource type="Texture2D" uid="uid://bal2gljvrybgh" path="res://Assets/Sprites/enemys/robot/3-Robot-Atack.png" id="3_30yes"]
[ext_resource type="Texture2D" uid="uid://b4bwnu5wwg6kv" path="res://icon.svg" id="3_n7q57"]
[ext_resource type="Texture2D" uid="uid://cowj8t7k0cxup" path="res://Assets/Sprites/enemys/robot/3-Robot-Walk.png" id="4_30yes"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_lgw76"]
radius = 10.819165
height = 26.275116

[sub_resource type="RectangleShape2D" id="RectangleShape2D_leowk"]
size = Vector2(33.865532, 19.15997)

[sub_resource type="Animation" id="Animation_leowk"]
resource_name = "Idle"
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.099999994, 0.2, 0.33333334),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("sprite:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_t4g6b")]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("sprite:hframes")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("sprite:offset")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1.283, 7.879)]
}

[sub_resource type="Animation" id="Animation_lgw76"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("area_dano/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("sprite:texture")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("2_t4g6b")]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("sprite:hframes")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [4]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("sprite:offset")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1.283, 7.879)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("area_dano/hitbox:visible")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("area_dano/hitbox:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(14.672202, -11.591963)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("area_dano/hitbox:scale")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0.06690135, -0.051375628)]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("AnimationPlayer:speed_scale")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}

[sub_resource type="Animation" id="Animation_30yes"]
resource_name = "attack"
length = 0.8
step = 24.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.06666667, 0.16666667, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("area_dano/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.06666666, 0.46666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [true, false, true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("sprite:texture")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("3_30yes")]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("sprite:offset")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-2.755, 7.879)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("area_dano/hitbox:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.16959488, 0.47044715),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("area_dano/hitbox:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0.16959488),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(14.672202, -11.591963)]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("area_dano/hitbox:scale")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0.17281643, 0.23333333, 0.36369583, 0.47044715),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector2(0.06690135, -0.051375628), Vector2(0.227, -0.051), Vector2(0.227, -0.051), Vector2(0.06690135, -0.051375628)]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("AnimationPlayer:speed_scale")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0, 0.65),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0.301, 1.0]
}

[sub_resource type="Animation" id="Animation_t4g6b"]
resource_name = "walk"
length = 0.5
loop_mode = 1
step = 0.0333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.06666667, 0.16666667, 0.26666668, 0.33333334, 0.43333334),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("area_dano/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("sprite:texture")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("4_30yes")]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("sprite:hframes")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [6]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_lgw76"]
_data = {
&"Idle": SubResource("Animation_leowk"),
&"RESET": SubResource("Animation_lgw76"),
&"attack": SubResource("Animation_30yes"),
&"walk": SubResource("Animation_t4g6b")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_n7q57"]
animation = &"attack"
use_custom_timeline = true
timeline_length = 4.5
stretch_time_scale = true
start_offset = 0.0
loop_mode = 0

[sub_resource type="AnimationNodeTimeSeek" id="AnimationNodeTimeSeek_80imi"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_osttl"]
graph_offset = Vector2(-49.611664, 0.85791016)
nodes/output/position = Vector2(780, 100)
nodes/Animation/node = SubResource("AnimationNodeAnimation_n7q57")
nodes/Animation/position = Vector2(320, 120)
nodes/TimeSeek/node = SubResource("AnimationNodeTimeSeek_80imi")
nodes/TimeSeek/position = Vector2(540, 100)
node_connections = [&"output", 0, &"TimeSeek", &"TimeSeek", 0, &"Animation"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lgw76"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_30yes"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t4g6b"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_n7q57"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_80imi"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_osttl"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g7nnu"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kuc4i"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ggq53"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_30yes"]
states/End/position = Vector2(799.10156, 75)
states/Start/position = Vector2(322.3672, 91)
states/attack/node = SubResource("AnimationNodeBlendTree_osttl")
states/attack/position = Vector2(632.33997, 91)
states/idle/node = SubResource("AnimationNodeAnimation_lgw76")
states/idle/position = Vector2(454.34384, 91)
states/walk/node = SubResource("AnimationNodeAnimation_30yes")
states/walk/position = Vector2(524.27356, 213.59344)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_t4g6b"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_n7q57"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_80imi"), "attack", "walk", SubResource("AnimationNodeStateMachineTransition_osttl"), "walk", "attack", SubResource("AnimationNodeStateMachineTransition_g7nnu"), "idle", "attack", SubResource("AnimationNodeStateMachineTransition_kuc4i"), "attack", "idle", SubResource("AnimationNodeStateMachineTransition_ggq53")]
graph_offset = Vector2(230.42978, 16.378593)

[node name="Enemy_base" type="CharacterBody2D" groups=["Enemy"]]
scale = Vector2(-1.294, 1.294)
script = ExtResource("1_lgw76")
SPEED = 300.0

[node name="sprite" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(0, -11.281)
texture = ExtResource("2_t4g6b")
offset = Vector2(1.283, 7.879)
hframes = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_lgw76")

[node name="area_dano" type="Area2D" parent="."]
position = Vector2(-27.047913, 10.046368)

[node name="CollisionShape2D" type="CollisionShape2D" parent="area_dano"]
position = Vector2(2.3183918, -9.579985)
shape = SubResource("RectangleShape2D_leowk")
disabled = true
debug_color = Color(0.94266504, 0.24080265, 0.027706947, 0.41960785)

[node name="hitbox" type="Sprite2D" parent="area_dano"]
visible = false
modulate = Color(0.11076216, 0.11076217, 0.11076217, 1)
self_modulate = Color(0.25490198, 1, 1, 1)
position = Vector2(14.672202, -11.591963)
scale = Vector2(0.06690135, -0.051375628)
texture = ExtResource("3_n7q57")
offset = Vector2(-63.50493, 2.5622025)

[node name="RayCast2D" type="RayCast2D" parent="."]
position = Vector2(0, 6.18238)
target_position = Vector2(-11.591963, 0)
collision_mask = 15
hit_from_inside = true
collide_with_areas = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_lgw76")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_30yes")
anim_player = NodePath("../AnimationPlayer")
parameters/attack/TimeSeek/seek_request = -1.0

[node name="attack_raycast" type="RayCast2D" parent="."]
visible = false
target_position = Vector2(-41.731068, 0)
collision_mask = 4

[connection signal="area_entered" from="area_dano" to="." method="_on_area_2d_body_entered"]
